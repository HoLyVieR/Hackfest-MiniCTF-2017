#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>

void main() {
	if (seteuid(1001) == -1 || setuid(1001) == -1 || setegid(1001) == -1 || setgid(1001) == -1) {
		printf("Error for 'setuid'\n");
	}

	char command[100];
	char user[20];

	puts("Command : ");
	gets(command);

	if (strcmp(command, "ls") != 0 && strcmp(command, "echo 'Hello World!'") != 0) {
		puts("Valid command are : ");
		puts(" - ls");
		puts(" - echo 'Hello World!'");
		exit(0);
	}

	puts("User : ");
	gets(user);

	write(1, "Hello ", 6);
	write(1, user, strlen(user));
	puts("!");

	system(command);
}